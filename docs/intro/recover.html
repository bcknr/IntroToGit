<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.2.313">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Introduction to Git and Github with RStudio - ‘Disaster’ Recovery</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1.6em;
  vertical-align: middle;
}
</style>


<script src="../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../site_libs/clipboard/clipboard.min.js"></script>
<script src="../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../site_libs/quarto-search/fuse.min.js"></script>
<script src="../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../">
<link href="../activities/create_act.html" rel="next">
<link href="../intro/collab.html" rel="prev">
<script src="../site_libs/quarto-html/quarto.js"></script>
<script src="../site_libs/quarto-html/popper.min.js"></script>
<script src="../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../site_libs/quarto-html/anchor.min.js"></script>
<link href="../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit"
  }
}</script>
<script async="" src="https://www.googletagmanager.com/gtag/js?id=G-C8C153PJMW"></script>

<script type="text/javascript">

window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'G-C8C153PJMW', { 'anonymize_ip': true});
</script>


<link rel="stylesheet" href="../styles.css">
</head>

<body class="nav-sidebar docked">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
  <nav class="quarto-secondary-nav" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
    <div class="container-fluid d-flex justify-content-between">
      <h1 class="quarto-secondary-nav-title">‘Disaster’ Recovery</h1>
      <button type="button" class="quarto-btn-toggle btn" aria-label="Show secondary navigation">
        <i class="bi bi-chevron-right"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse sidebar-navigation docked overflow-auto">
    <div class="pt-lg-2 mt-2 text-left sidebar-header">
    <div class="sidebar-title mb-0 py-0">
      <a href="../">Introduction to Git and Github with RStudio</a> 
        <div class="sidebar-tools-main">
    <a href="https://github.com/" title="GitHub" class="sidebar-tool px-1"><i class="bi bi-github"></i></a>
</div>
    </div>
      </div>
      <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
      </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../index.html" class="sidebar-item-text sidebar-link">Welcome</a>
  </div>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="true">Getting Started</a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="true">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../getting_started/installation.html" class="sidebar-item-text sidebar-link">Installation</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../getting_started/pat.html" class="sidebar-item-text sidebar-link">Personal Access Token</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../getting_started/testlink.html" class="sidebar-item-text sidebar-link">Test Connection</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../getting_started/questions.html" class="sidebar-item-text sidebar-link">Questions?</a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" aria-expanded="true">Intro to Git/GitHub</a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" aria-expanded="true">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-2" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../intro/whatisgit.html" class="sidebar-item-text sidebar-link">What are Git and GitHub?</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../intro/why.html" class="sidebar-item-text sidebar-link">Why should you use Git/GitHub?</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../intro/workflow.html" class="sidebar-item-text sidebar-link">A Basic Workflow</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../intro/collab.html" class="sidebar-item-text sidebar-link">Collaborate</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../intro/recover.html" class="sidebar-item-text sidebar-link active">‘Disaster’ Recovery</a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" aria-expanded="true">Activities</a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" aria-expanded="true">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-3" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../activities/create_act.html" class="sidebar-item-text sidebar-link">Create a Repo</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../activities/collab_act.html" class="sidebar-item-text sidebar-link">Collaborate</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../activities/recover_act.html" class="sidebar-item-text sidebar-link">Break it</a>
  </div>
</li>
      </ul>
  </li>
    </ul>
    </div>
</nav>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#reset-your-repo" id="toc-reset-your-repo" class="nav-link active" data-scroll-target="#reset-your-repo">Reset your Repo</a></li>
  <li><a href="#revert-to-the-last-commit-in-the-rstudio-gui" id="toc-revert-to-the-last-commit-in-the-rstudio-gui" class="nav-link" data-scroll-target="#revert-to-the-last-commit-in-the-rstudio-gui">Revert to the last commit in the RStudio GUI</a></li>
  <li><a href="#amend-the-last-commit" id="toc-amend-the-last-commit" class="nav-link" data-scroll-target="#amend-the-last-commit">Amend the last commit</a></li>
  <li><a href="#more-advanced-git" id="toc-more-advanced-git" class="nav-link" data-scroll-target="#more-advanced-git">(More) advanced Git</a>
  <ul class="collapse">
  <li><a href="#undo-your-last-unpublished-commit" id="toc-undo-your-last-unpublished-commit" class="nav-link" data-scroll-target="#undo-your-last-unpublished-commit">Undo your last (unpublished) commit</a></li>
  <li><a href="#undo-a-published-commit" id="toc-undo-a-published-commit" class="nav-link" data-scroll-target="#undo-a-published-commit">Undo a published commit</a></li>
  <li><a href="#create-a-branch-based-on-an-old-state" id="toc-create-a-branch-based-on-an-old-state" class="nav-link" data-scroll-target="#create-a-branch-based-on-an-old-state">Create a branch based on an old state</a></li>
  </ul></li>
  </ul>
<div class="toc-actions"><div><i class="bi bi-github"></i></div><div class="action-links"><p><a href="https://github.com/bcknr/IntroToGit/issues/new" class="toc-action">Report an issue</a></p></div></div></nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title d-none d-lg-block">‘Disaster’ Recovery</h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  

</header>

<section id="reset-your-repo" class="level2">
<h2 class="anchored" data-anchor-id="reset-your-repo">Reset your Repo</h2>
<p>Git allows you to recover from mistakes by allowing you to revert to previous versions.</p>
<p>If you commit your changes and push them to GitHub, often this becomes your “worst case scenario.” Now if you have an error,</p>
<ol type="1">
<li><p>Save a copy of your project directory (or the files that changed) somewhere else safe, just in case, and</p></li>
<li><p>Rename your local repository</p></li>
<li><p>Clone the repo to your machine again</p></li>
<li><p>Copy any necessary files to the new directory and check that everything works</p></li>
<li><p>Stage, commit, push</p></li>
</ol>
<p>We will practice this in the <a href="../activities/recover_act.html">“Break it”</a> activity.</p>
</section>
<section id="revert-to-the-last-commit-in-the-rstudio-gui" class="level2">
<h2 class="anchored" data-anchor-id="revert-to-the-last-commit-in-the-rstudio-gui">Revert to the last commit in the RStudio GUI</h2>
<p>If you prefer using RStudio’s visual git commands, you can revert to the last committed version of a file by clicking on the “diff” button (<img src="../images/diffButton.png" width="62" height="25">) and selecting the file you would like to revert. At the bottom, you will see all the changes you made (deletions in red, additions in green).</p>
<p>To revert all the changes, select the file you want to undo and click “revert” at the top of the window.</p>
<p><img src="../images/revert.png" class="img-fluid"></p>
</section>
<section id="amend-the-last-commit" class="level2">
<h2 class="anchored" data-anchor-id="amend-the-last-commit">Amend the last commit</h2>
<p>Before pushing your changes, you can amend the last commit in RStudio. Start by making a minor edit, so the files are shown in your Git tab again. Stage the file and click commit. Before committing the file or writing a commit message, click the box next to “Amend previous commit.” You can now edit the commit message.</p>
<p><img src="../images/amend.png" class="img-fluid"></p>
</section>
<section id="more-advanced-git" class="level2">
<h2 class="anchored" data-anchor-id="more-advanced-git">(More) advanced Git</h2>
<p>Using Git through RStudio is convenient but can be limiting. You can run various commands through the terminal, allowing for more advanced functionality.</p>
<section id="undo-your-last-unpublished-commit" class="level3">
<h3 class="anchored" data-anchor-id="undo-your-last-unpublished-commit">Undo your last (unpublished) commit</h3>
<p>If you need to revert to a state before your last commit and have not pushed your changes to GitHub use the command line. Running <code>$ git reset -- soft HEAD~1</code> in the terminal (or terminal tab in RStudio) will take you back to where you were right before you hit commit with all the same edits. This can be helpful if you push too much at once or realize you want to remove a file from the last commit.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="../images/reset.png" class="img-fluid figure-img" width="434"></p>
</figure>
</div>
<div class="callout-warning callout callout-style-default callout-captioned">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-caption-container flex-fill">
For bigger mistakes...
</div>
</div>
<div class="callout-body-container callout-body">
<p>Run <code>git reset --hard HEAD~1</code> in the terminal (either in R or on your computer). This is a hard reset to where you were at the last commit. When you need it, it’s great. But be careful when using this since you will lose changes to files!</p>
</div>
</div>
</section>
<section id="undo-a-published-commit" class="level3">
<h3 class="anchored" data-anchor-id="undo-a-published-commit">Undo a published commit</h3>
<p>If you made significant errors, broke your code, accidentally introduced a bug, or tried something that just didn’t work (and weren’t using branches) you should probably just let it go, or you can try reversing the changes. It is probably best to avoid getting to this point but if you need it, here it is.</p>
<p>Start by exploring the commit history to find which commit you would like to revert to.</p>
<ol type="1">
<li>On GitHub, click on the file you want to revert and click on <code>history</code> on the right of the screen.</li>
</ol>
<p><img src="../images/history.png" class="img-fluid"></p>
<ol start="2" type="1">
<li>Scroll through the history to find the commit you would like to revert to. Click on the blue numbers, the commit ID. You will see the “diff” for that commit and a commit hash on the right.</li>
</ol>
<p><img src="../images/commitdiff.png" class="img-fluid"></p>
<ol start="3" type="1">
<li><p>If you are certain you want to revert to this commit, enter</p>
<p><code>$ git revert &lt;the commit hash or id&gt;</code> into the terminal.</p></li>
</ol>
</section>
<section id="create-a-branch-based-on-an-old-state" class="level3">
<h3 class="anchored" data-anchor-id="create-a-branch-based-on-an-old-state">Create a branch based on an old state</h3>
<p>If you aren’t certain about taking such drastic actions as reverting or resetting, it is possible to create a new branch (again, I recommend you read up on branches) based on your repo’s state at a previous commit.</p>
<p><code>$ git checkout -b &lt;new branch name&gt; &lt;hash or id&gt;</code></p>


</section>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    target: function(trigger) {
      return trigger.previousElementSibling;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
<nav class="page-navigation">
  <div class="nav-page nav-page-previous">
      <a href="../intro/collab.html" class="pagination-link">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text">Collaborate</span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="../activities/create_act.html" class="pagination-link">
        <span class="nav-page-text">Create a Repo</span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav>
</div> <!-- /content -->



</body></html>